@echo off
setlocal

set "MAVEN_PROJECTBASEDIR=%~dp0"
set "WRAPPER_JAR=%MAVEN_PROJECTBASEDIR%.mvn\wrapper\maven-wrapper.jar"
set "LAUNCHER=org.apache.maven.wrapper.MavenWrapperMain"

if not exist "%WRAPPER_JAR%" (
    echo Maven Wrapper JAR not found. Bootstrapping...
    call "%MAVEN_PROJECTBASEDIR%bootstrap.cmd" 2>nul
    if errorlevel 1 (
        echo ERROR: Failed to bootstrap Maven Wrapper.
        exit /b 1
    )
)

"%JAVA_HOME%\bin\java" -classpath "%WRAPPER_JAR%" "-Dmaven.multiModuleProjectDirectory=%MAVEN_PROJECTBASEDIR%" %LAUNCHER% %*